{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/NoteSmart/utils/pdf.ts"],"sourcesContent":["import * as pdfjsLib from 'pdfjs-dist';\r\n\r\n// Configure worker\r\n// In a real app, we should bundle the worker or point to a CDN\r\n// For this prototype, we'll try to use the CDN approach to avoid build complexity\r\npdfjsLib.GlobalWorkerOptions.workerSrc = `//unpkg.com/pdfjs-dist@${pdfjsLib.version}/build/pdf.worker.min.mjs`;\r\n\r\nexport async function loadPDF(file: File): Promise<string[]> {\r\n  const arrayBuffer = await file.arrayBuffer();\r\n  const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });\r\n  const pdf = await loadingTask.promise;\r\n  \r\n  const images: string[] = [];\r\n  \r\n  for (let i = 1; i <= pdf.numPages; i++) {\r\n    const page = await pdf.getPage(i);\r\n    const viewport = page.getViewport({ scale: 2.0 }); // High quality\r\n    \r\n    const canvas = document.createElement('canvas');\r\n    const context = canvas.getContext('2d');\r\n    \r\n    if (!context) continue;\r\n    \r\n    canvas.height = viewport.height;\r\n    canvas.width = viewport.width;\r\n    \r\n    await page.render({\r\n      canvasContext: context,\r\n      viewport: viewport,\r\n      canvasFactory: {\r\n          create: (width: number, height: number) => {\r\n              const canvas = document.createElement('canvas');\r\n              canvas.width = width;\r\n              canvas.height = height;\r\n              return canvas;\r\n          },\r\n          reset: (canvasAndContext: { canvas: HTMLCanvasElement; context: CanvasRenderingContext2D }, width: number, height: number) => {\r\n              canvasAndContext.canvas.width = width;\r\n              canvasAndContext.canvas.height = height;\r\n          },\r\n          destroy: (canvasAndContext: { canvas: HTMLCanvasElement; context: CanvasRenderingContext2D }) => {\r\n              canvasAndContext.canvas.width = 0;\r\n              canvasAndContext.canvas.height = 0;\r\n          }\r\n      }\r\n    } as any).promise;\r\n    \r\n    images.push(canvas.toDataURL('image/png'));\r\n  }\r\n  \r\n  return images;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,mBAAmB;AACnB,+DAA+D;AAC/D,kFAAkF;AAClF,qKAA4B,CAAC,SAAS,GAAG,CAAC,uBAAuB,EAAE,yJAAgB,CAAC,yBAAyB,CAAC;AAEvG,eAAe,QAAQ,IAAU;IACtC,MAAM,cAAc,MAAM,KAAK,WAAW;IAC1C,MAAM,cAAc,6JAAoB,CAAC;QAAE,MAAM;IAAY;IAC7D,MAAM,MAAM,MAAM,YAAY,OAAO;IAErC,MAAM,SAAmB,EAAE;IAE3B,IAAK,IAAI,IAAI,GAAG,KAAK,IAAI,QAAQ,EAAE,IAAK;QACtC,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC;QAC/B,MAAM,WAAW,KAAK,WAAW,CAAC;YAAE,OAAO;QAAI,IAAI,eAAe;QAElE,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,MAAM,UAAU,OAAO,UAAU,CAAC;QAElC,IAAI,CAAC,SAAS;QAEd,OAAO,MAAM,GAAG,SAAS,MAAM;QAC/B,OAAO,KAAK,GAAG,SAAS,KAAK;QAE7B,MAAM,KAAK,MAAM,CAAC;YAChB,eAAe;YACf,UAAU;YACV,eAAe;gBACX,QAAQ,CAAC,OAAe;oBACpB,MAAM,SAAS,SAAS,aAAa,CAAC;oBACtC,OAAO,KAAK,GAAG;oBACf,OAAO,MAAM,GAAG;oBAChB,OAAO;gBACX;gBACA,OAAO,CAAC,kBAAoF,OAAe;oBACvG,iBAAiB,MAAM,CAAC,KAAK,GAAG;oBAChC,iBAAiB,MAAM,CAAC,MAAM,GAAG;gBACrC;gBACA,SAAS,CAAC;oBACN,iBAAiB,MAAM,CAAC,KAAK,GAAG;oBAChC,iBAAiB,MAAM,CAAC,MAAM,GAAG;gBACrC;YACJ;QACF,GAAU,OAAO;QAEjB,OAAO,IAAI,CAAC,OAAO,SAAS,CAAC;IAC/B;IAEA,OAAO;AACT"}}]
}